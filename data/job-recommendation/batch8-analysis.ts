import { addBatch, printResults, analyzeDistribution, getCollectionStatus, analyzeByRange } from './top1000-collector';

// ë°°ì¹˜ 8 (701-800ìœ„) ë°ì´í„° ì¶”ê°€
const BATCH_8 = [
    'ì œë…¼', 'ì œë¡œ', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ìœˆë“œë¸Œë ˆì´ì»¤', 'ë©”ì¹´ë‹‰',
    'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë Œ', 'ì„€ë„ì–´', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ì œë…¼',
    'ì¼ë¦¬ì›€', 'ë¹„ìˆ', 'ì•„ë¸', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'í˜¸ì˜',
    'ì¹´ë°ë‚˜', 'ì•„í¬', 'ë°”ì´í¼', 'ì¹´ì´ì €', 'ì•„ë¸',
    'ë©”ë¥´ì„¸ë°ìŠ¤', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ì¹´ë°ë‚˜', 'ë Œ', 'ì œë…¼',
    'ì œë…¼', 'ë³´ìš°ë§ˆìŠ¤í„°', 'ì•„ë¸', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ë Œ',
    'ë“€ì–¼ë¸”ë ˆì´ë“œ', 'ë£¨ë¯¸ë„ˆìŠ¤', 'ë“€ì–¼ë¸”ë ˆì´ë“œ', 'ë©”ì¹´ë‹‰', 'í”Œë ˆì„ìœ„ìë“œ',
    'íˆì–´ë¡œ', 'ì•„ë€', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë‚˜ì´íŠ¸ë¡œë“œ', 'ë‚˜ì´íŠ¸ë¡œë“œ',
    'ì œë…¼', 'ë‚˜ì´íŠ¸ë¡œë“œ', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë‚˜ì´íŠ¸ë¡œë“œ', 'ë°°í‹€ë©”ì´ì§€',
    'ì—”ì ¤ë¦­ë²„ìŠ¤í„°', 'ì•„í¬', 'ë°”ì´í¼', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë©”ë¥´ì„¸ë°ìŠ¤',
    'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë°ëª¬ì–´ë²¤ì ¸', 'ì—ë°˜', 'ì†Œìš¸ë§ˆìŠ¤í„°', 'ì—”ì ¤ë¦­ë²„ìŠ¤í„°',
    'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ì‹ ê¶', 'ìº¡í‹´', 'ì—ë°˜', 'ì€ì›”',
    'ë‚˜ì´íŠ¸ë¡œë“œ', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë‚˜ì´íŠ¸ì›Œì»¤', 'ìºë…¼ìŠˆí„°', 'ë¹„ìˆ',
    'íŒ¬í…€', 'ì¼ë¦¬ì›€', 'ì€ì›”', 'ë¼ë¼', 'íŒ”ë¼ë”˜',
    'ì œë…¼', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'íŒ¬í…€', 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ì œë¡œ',
    'ì œë…¼', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ë‚˜ì´íŠ¸ë¡œë“œ', 'ìº¡í‹´', 'ë©”ì¹´ë‹‰',
    'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ìºë…¼ìŠˆí„°', 'í‚¤ë„¤ì‹œìŠ¤', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ì™€ì¼ë“œí—Œí„°',
    'íŒ¬í…€', 'ì†Œìš¸ë§ˆìŠ¤í„°', 'íˆì–´ë¡œ', 'ì•„ë¸', 'ë“€ì–¼ë¸”ë ˆì´ë“œ',
    'ë Œ', 'ìœˆë“œë¸Œë ˆì´ì»¤', 'íŒ¬í…€', 'ë‹¤í¬ë‚˜ì´íŠ¸', 'ë¹„ìˆ',
    'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)', 'ë¹„ìˆ', 'ë‹¤í¬ë‚˜ì´íŠ¸', 'ë©”ë¥´ì„¸ë°ìŠ¤', 'ë‹¤í¬ë‚˜ì´íŠ¸'
];

// ë°°ì¹˜ 8 ì¶”ê°€
addBatch(8, BATCH_8);

// í˜„ì¬ê¹Œì§€ ê²°ê³¼ ì¶œë ¥
console.log('\n');
console.log('='.repeat(80));
console.log('ğŸ“Š ë°°ì¹˜ 8 (701-800ìœ„) ì¶”ê°€ ì™„ë£Œ!');
console.log('='.repeat(80));

const status = getCollectionStatus();
console.log(`\nâœ… í˜„ì¬ ì§„í–‰ë¥ : ${status.progress.toFixed(1)}% (${status.totalCollected}/1000)`);
console.log(`ğŸ“¦ ìˆ˜ì§‘ëœ ë°°ì¹˜: ${status.batchesCollected}/10`);
console.log(`â³ ë‚¨ì€ ë°°ì¹˜: ${status.remainingBatches}ê°œ`);

// ì „ì²´ TOP 25
const distribution = analyzeDistribution();
console.log('\nã€ëˆ„ì  TOP 25 ì§ì—… (1-800ìœ„)ã€‘');
distribution.slice(0, 25).forEach((d, i) => {
    console.log(
        `${(i + 1).toString().padStart(2)}. ${d.job.padEnd(20)} ` +
        `${d.count.toString().padStart(3)}ê°œ (${d.percentage.toFixed(1)}%) ` +
        `í‰ê·  ${d.averageRank.toFixed(1)}ìœ„`
    );
});

// 701-800ìœ„ êµ¬ê°„ ë¶„ì„
const batch8Jobs = BATCH_8.reduce((acc, job) => {
    acc[job] = (acc[job] || 0) + 1;
    return acc;
}, {} as Record<string, number>);

const batch8Top = Object.entries(batch8Jobs)
    .sort(([, a], [, b]) => b - a)
    .slice(0, 10);

console.log('\nğŸ”¥ 701-800ìœ„ êµ¬ê°„ TOP 10:');
batch8Top.forEach(([job, count], i) => {
    console.log(`  ${(i + 1).toString().padStart(2)}. ${job.padEnd(20)} ${count}ê°œ`);
});

// íŠ¹ì§• ë¶„ì„
const firePoison = BATCH_8.filter(j => j === 'ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…)').length;
const mercedes = BATCH_8.filter(j => j === 'ë©”ë¥´ì„¸ë°ìŠ¤').length;
console.log(`\nğŸ”¥ ì•„í¬ë©”ì´ì§€(ë¶ˆ,ë…) ëŒ€í­ë°œ: 701-800ìœ„ì—ì„œ ${firePoison}ê°œ (êµ¬ê°„ 1ìœ„)`);
console.log(`ğŸ¦Œ ë©”ë¥´ì„¸ë°ìŠ¤ ê¸‰ì¦: 701-800ìœ„ì—ì„œ ${mercedes}ê°œ (êµ¬ê°„ 2ìœ„)`);

// êµ¬ê°„ë³„ ë¹„êµ
console.log('\nã€êµ¬ê°„ë³„ 1ìœ„ ì§ì—… ë¹„êµ (1-800ìœ„)ã€‘');
const rangeAnalysis = analyzeByRange();
rangeAnalysis.slice(0, 8).forEach(range => {
    if (range.top3Jobs.length > 0) {
        const top1 = range.top3Jobs[0];
        console.log(`  ${range.range}: ${top1.job} (${top1.count}ê°œ)`);
    }
});

// ì „ì²´ ìš”ì•½ ì¶œë ¥
printResults();

console.log('\n' + '='.repeat(80));
console.log('ğŸ 80% ì™„ë£Œ! ë§ˆì§€ë§‰ 200ê°œë§Œ ë”!');
console.log('='.repeat(80));
